/* Layout & Grid System */
body {
  background:
    radial-gradient(1200px 800px at 50% -10%, rgba(255,200,120,0.10), transparent 55%),
    radial-gradient(900px 700px at 20% 25%, rgba(212,140,75,0.10), transparent 50%),
    radial-gradient(1000px 900px at 80% 60%, rgba(120,70,40,0.10), transparent 55%),
    linear-gradient(180deg, var(--bg-1), var(--bg-0));
  color: var(--color-text);
  min-height: 100dvh;
  display: flex;
  flex-direction: column;
  font-family: Georgia, "Times New Roman", serif;
}

#app-shell {
  display: flex;
  flex-direction: column;
  min-height: auto;
  width: 100%;
  max-width: 420px;
  margin: 0 auto;
  padding: 10px 4px calc(15px + var(--sab));
  position: relative;
}

#app-header {
  background:
    linear-gradient(180deg, rgba(255,210,110,0.08), rgba(0,0,0,0.35)),
    linear-gradient(180deg, #1b120c, #0c0907);
  border: 1px solid rgba(245,210,120,0.20);
  border-radius: var(--radius-md);
  box-shadow: 0 10px 24px var(--shadow);
  position: fixed;
  top: var(--sat);
  left: 50%;
  transform: translateX(calc(-50% - 5px));
  width: 100%;
  max-width: 420px;
  z-index: var(--z-sticky);
  padding: var(--space-md);
}

#app-header::before {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: var(--radius-md);
  background: linear-gradient(135deg, rgba(242,208,122,0.35), rgba(213,143,85,0.18), rgba(90,50,20,0.10));
  mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  padding: 1px;
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
}

/* Noise overlay */
.noise {
  pointer-events: none;
  position: absolute;
  inset: 0;
  opacity: 0.10;
  background-image:
    radial-gradient(circle at 20% 30%, rgba(255,255,255,0.08) 0 1px, transparent 2px),
    radial-gradient(circle at 70% 60%, rgba(255,255,255,0.07) 0 1px, transparent 2px),
    radial-gradient(circle at 40% 80%, rgba(255,255,255,0.06) 0 1px, transparent 2px);
  background-size: 60px 60px, 80px 80px, 100px 100px;
  mix-blend-mode: overlay;
  z-index: 1;
}

.toprow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.avatar {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}

.portrait {
  width: 36px;
  height: 36px;
  border-radius: 10px;
  background:
    radial-gradient(circle at 30% 30%, rgba(255,230,170,0.18), transparent 55%),
    linear-gradient(180deg, #2f1f14, #120c08);
  border: 1px solid rgba(242,208,122,0.35);
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.6), 0 6px 12px rgba(0,0,0,0.55);
  position: relative;
}

.portrait::after {
  content: "";
  position: absolute;
  inset: 4px;
  border-radius: 8px;
  background:
    radial-gradient(circle at 45% 35%, rgba(255,210,120,0.18), transparent 55%),
    radial-gradient(circle at 55% 65%, rgba(212,140,75,0.12), transparent 55%);
  opacity: 0.8;
}

.level {
  font-variant-numeric: tabular-nums;
  color: var(--brass-0);
  font-weight: 700;
  letter-spacing: 0.02em;
  white-space: nowrap;
}

.meters {
  display: flex;
  align-items: center;
  gap: 10px;
  font-variant-numeric: tabular-nums;
  white-space: nowrap;
}

.meter {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 999px;
  background:
    linear-gradient(180deg, rgba(255,220,140,0.10), rgba(0,0,0,0.35)),
    linear-gradient(180deg, #1a120c, #0c0907);
  border: 1px solid rgba(242,208,122,0.22);
  box-shadow: inset 0 0 12px rgba(0,0,0,0.6);
}

.gem, .coin {
  width: 10px;
  height: 10px;
  border-radius: 2px;
  box-shadow: 0 0 10px var(--glow);
}

.gem {
  background: linear-gradient(135deg, #bfe8ff, #4aa0d6);
  border: 1px solid rgba(200,245,255,0.35);
}

.coin {
  background: linear-gradient(135deg, var(--brass-0), var(--brass-1));
  border: 1px solid rgba(255,230,140,0.35);
  border-radius: 50%;
}

.statusbar {
  margin-top: 10px;
  height: 10px;
  border-radius: 999px;
  background: linear-gradient(180deg, #0b0907, #050403);
  border: 1px solid rgba(242,208,122,0.18);
  box-shadow: inset 0 0 10px rgba(0,0,0,0.85);
  overflow: hidden;
  position: relative;
}

.statusbar > span {
  display: block;
  height: 100%;
  background:
    linear-gradient(90deg, rgba(255,220,140,0.10), rgba(255,210,120,0.25)),
    linear-gradient(90deg, #4f2a12, #b56a33 40%, #f2d07a 75%, #c59b3c);
  box-shadow: 0 0 14px rgba(255,210,120,0.25);
  transition: width 0.3s ease;
}

#root {
  flex: 1;
  display: flex;
  flex-direction: column;
  max-width: 1280px;
  width: 100%;
  margin: 0 auto;
  padding: var(--space-lg);
}

/* Container utilities */
.container {
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 calc(var(--space-md) + 5px);
}

.container-sm {
  max-width: 640px;
}

.container-md {
  max-width: 768px;
}

.container-lg {
  max-width: 1024px;
}

/* Flex utilities */
.flex {
  display: flex;
}

.flex-col {
  flex-direction: column;
}

.flex-center {
  justify-content: center;
  align-items: center;
}

.flex-between {
  justify-content: space-between;
}

.flex-around {
  justify-content: space-around;
}

.flex-wrap {
  flex-wrap: wrap;
}

.gap-sm { gap: var(--space-sm); }
.gap-md { gap: var(--space-md); }
.gap-lg { gap: var(--space-lg); }
.gap-xl { gap: var(--space-xl); }

/* Grid utilities */
.grid {
  display: grid;
}

.grid-3x3 {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: var(--space-md);
}

/* Stabilize grid items: don't stretch and fix row height for smoother scroll (esp. Safari/iOS) */
.grid-3x3{
  align-items: start;                 /* замість stretch */
  align-content: start;
  grid-auto-rows: var(--card-h, 140px); /* зафіксуй висоту рядка */
}

.grid-cols-2 {
  grid-template-columns: repeat(2, 1fr);
}

.grid-cols-3 {
  grid-template-columns: repeat(3, 1fr);
}

.grid-cols-4 {
  grid-template-columns: repeat(4, 1fr);
}

/* Screen utilities */
.screen {
  width: 100%;
  flex: 1;
  display: flex;
  flex-direction: column;
}

.screen-centered {
  justify-content: center;
  align-items: center;
}

/* Responsive */
@media (max-width: 768px) {
  #root {
    padding: var(--space-md);
  }
  
  .app-title {
    font-size: var(--font-xl);
  }
  
  .grid-3x3 {
    gap: var(--space-sm);
  }
}

/* ===============================
   ORIENTATION LOCK (PORTRAIT ONLY)
   =============================== */

#orientation-lock {
  display: none;
  position: fixed;
  inset: 0;
  z-index: 99999;
  background: radial-gradient(circle at center, #0b0b0b 0%, #000 70%);
  color: #f4e6c6;
}

#orientation-lock .lock-box {
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 16px;
  text-align: center;
}

#orientation-lock .lock-icon { font-size: 56px; }
#orientation-lock .lock-text { font-size: 18px; font-weight:700; letter-spacing:0.04em }

/* When device is landscape, show overlay and hide app */
@media screen and (orientation: landscape) {
  #orientation-lock { display: block; }
  #app-shell, #root { display: none !important; }
}

/* JS fallback: when body.landscape is toggled */
body.landscape #orientation-lock { display: block; }
body.landscape #app-shell, body.landscape #root { display: none !important; }
